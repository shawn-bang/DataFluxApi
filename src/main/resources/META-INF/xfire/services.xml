<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <bean id="helloWorldBean" class="cn.intellitrust.fraud.impl.DemoXFireWebserviceImpl"/>

    <!-- 引入XFire预配置信息 -->
    <import resource="classpath:org/codehaus/xfire/spring/xfire.xml" />
    <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="urlMap">
            <map>
                <entry key="/HelloWorldService" value-ref="helloWorldService"/>
            </map>
        </property>
    </bean>

    <!-- 使用XFire导出器 -->
    <bean id="baseWebService" class="org.codehaus.xfire.spring.remoting.XFireExporter" lazy-init="false" abstract="true">
        <!-- 引用xfire.xml中定义的工厂 -->
        <property name="serviceFactory" ref="jsr181ServiceFactory" />
        <!-- 引用xfire.xml中的xfire实例 -->
        <property name="xfire" ref="xfire" />
    </bean>
    <bean id="helloWorldService" parent="baseWebService">
        <!-- 业务服务bean -->
        <property name="serviceBean" ref="helloWorldBean" />
        <!-- 业务服务bean的窄接口类 -->
        <property name="serviceClass" value="cn.intellitrust.fraud.DemoXFireWebservice" />
    </bean>

    <bean id="config" class="org.codehaus.xfire.aegis.type.Configuration">
        <property name="defaultExtensibleElements" value="false" />
        <property name="defaultExtensibleAttributes" value="false" />
        <property name="defaultNillable" value="false" />
        <property name="defaultMinOccurs" value="1" />
    </bean>

    <bean name="jsr181ServiceFactory" class="org.codehaus.xfire.annotations.AnnotationServiceFactory">
        <constructor-arg ref="xfire.transportManager" index="0" />
        <constructor-arg ref="config" index="1" type="org.codehaus.xfire.aegis.type.Configuration" />
    </bean>

</beans>